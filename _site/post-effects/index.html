<!DOCTYPE html> <!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]--> <!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8"><![endif]--> <!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9"><![endif]--> <!--[if gt IE 8]><!--> <html class="no-js"><!--<![endif]--> <head> <meta charset="UTF-8"> <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"> <meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"> <title>Post Effects &#8211; Silver Alex</title> <meta name="description" content="That which does not kill us makes us stronger."> <meta name="keywords" content="Post-Processing, Screen Space, Graphics"> <!-- Twitter Cards --> <meta name="twitter:card" content="summary_large_image"> <meta name="twitter:image" content="https://raw.githubusercontent.com/OneSilverBullet/SilverGamer.GitHub.io/gh-pages/_img/blogHead/DOF.jpg"> <meta name="twitter:title" content="Post Effects"> <meta name="twitter:description" content="The post effects that you cant live without once you have used."> <!-- Open Graph --> <meta property="og:locale" content="en_US"> <meta property="og:type" content="article"> <meta property="og:title" content="Post Effects"> <meta property="og:description" content="The post effects that you cant live without once you have used."> <meta property="og:url" content="https://onesilverbullet.github.io/silvergamer.github.io/post-effects/"> <meta property="og:site_name" content="Silver Alex"> <meta property="og:image" content="https://onesilverbullet.github.io/silvergamer.github.io/assets/img/logo.png"> <link rel="canonical" href="https://onesilverbullet.github.io/silvergamer.github.io/post-effects/"> <link href="https://onesilverbullet.github.io/silvergamer.github.io/feed.xml" type="application/atom+xml" rel="alternate" title="Silver Alex Feed"> <!-- Handheld --> <meta name="HandheldFriendly" content="True"> <meta name="MobileOptimized" content="320"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- CSS --> <link rel="stylesheet" href="https://onesilverbullet.github.io/silvergamer.github.io/assets/css/main.css"> <!-- JS --> <script src="https://onesilverbullet.github.io/silvergamer.github.io/assets/js/modernizr-3.3.1.custom.min.js"></script> <!-- Favicons --> <link rel="apple-touch-icon" href="https://onesilverbullet.github.io/silvergamer.github.io/assets/img/favicons/apple-icon-precomposed.png"> <link rel="apple-touch-icon" sizes="72x72" href="https://onesilverbullet.github.io/silvergamer.github.io/assets/img/favicons/apple-icon-72x72.png"> <link rel="apple-touch-icon" sizes="114x114" href="https://onesilverbullet.github.io/silvergamer.github.io/assets/img/favicons/apple-icon-114x114.png"> <link rel="apple-touch-icon" sizes="144x144" href="https://onesilverbullet.github.io/silvergamer.github.io/assets/img/favicons/apple-icon-144x144.png"> <link rel="shortcut icon" type="image/png" href="https://onesilverbullet.github.io/silvergamer.github.io/favicon.png" /> <link rel="shortcut icon" href="https://onesilverbullet.github.io/silvergamer.github.io/favicon.ico" /> <!-- Background Image --> <style type="text/css">body {background-image:url(https://onesilverbullet.github.io/silvergamer.github.io/assets/img/placeholder-big.jpg); background-repeat: no-repeat; background-size: cover; }</style> <!-- Post Feature Image --> <style type="text/css">.feature {background-image:url(https://raw.githubusercontent.com/OneSilverBullet/SilverGamer.GitHub.io/gh-pages/_img/blogHead/DOF.jpg);}</style> </head> <body> <nav id="dl-menu" class="dl-menuwrapper" role="navigation"> <button class="dl-trigger">Open Menu</button> <ul class="dl-menu"> <li><a href="https://onesilverbullet.github.io/silvergamer.github.io/">Home</a></li> <li> <a href="#">About</a> <ul class="dl-submenu"> <li> <img src="https://onesilverbullet.github.io/silvergamer.github.io/assets/img/logo.png" alt="Silver Alex photo" class="author-photo"> <h4>Silver Alex</h4> <p>That which does not kill us makes us stronger.</p> </li> <li><a href="https://onesilverbullet.github.io/silvergamer.github.io/about/"><span class="btn btn-inverse">Learn More</span></a></li> <li> <a href="http://linkedin.com/in/alexzhang820/" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-linkedin-square"></i> LinkedIn</a> </li> <li> <a href="http://github.com/OneSilverBullet?tab=repositories" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-github"></i> Github</a> </li> </ul><!-- /.dl-submenu --> </li> <li> <a href="#">Posts</a> <ul class="dl-submenu"> <li><a href="https://onesilverbullet.github.io/silvergamer.github.io/posts/">All Posts</a></li> <li><a href="https://onesilverbullet.github.io/silvergamer.github.io/tags/">All Tags</a></li> </ul> </li> <li><a href="https://onesilverbullet.github.io/silvergamer.github.io/projects/" >Projects</a></li> <li><a href="https://onesilverbullet.github.io/silvergamer.github.io/blog/" >Blog</a></li> </ul><!-- /.dl-menu --> </nav><!-- /.dl-menuwrapper --> <!-- Header --> <header class="header" role="banner"> <div class="wrapper animated fadeIn"> <div class="content"> <div class="post-title feature "> <h1>Post Effects</h1> <h4>17 Nov 2021</h4> <p class="reading-time"> <i class="fa fa-clock-o"></i> Reading time ~5 minutes </p><!-- /.entry-reading-time --> <a class="btn zoombtn" href="https://onesilverbullet.github.io/silvergamer.github.io/blog/"> <i class="fa fa-chevron-left"></i> </a> </div> <h2 id="overview">Overview</h2> <p>Dilation and Depth of Field are both classic post-process algorithms. Their relation is close. So we will talk about them together.</p> <h2 id="dilation">Dilation</h2> <h3 id="conception">Conception</h3> <ul> <li>Dilation dialtes or enlarges the brighter areas of an image while at the same time, contracts or shrinks the darker areas of an image.</li> <li>Effect: make a pillowy look.</li> <li>Usage: use dilation for a glow/bloom effect or DOF.</li> </ul> <h3 id="implementation">Implementation</h3> <figure class="highlight"><pre><code class="language-cpp" data-lang="cpp">  <span class="kt">int</span>   <span class="n">size</span>         <span class="o">=</span> <span class="kt">int</span><span class="p">(</span><span class="n">parameters</span><span class="p">.</span><span class="n">x</span><span class="p">);</span>
  <span class="kt">float</span> <span class="n">separation</span>   <span class="o">=</span>     <span class="n">parameters</span><span class="p">.</span><span class="n">y</span><span class="p">;</span>
  <span class="kt">float</span> <span class="n">minThreshold</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">;</span>
  <span class="kt">float</span> <span class="n">maxThreshold</span> <span class="o">=</span> <span class="mf">0.3</span><span class="p">;</span></code></pre></figure> <ul> <li>size/separation: how dilated the image become. (larger size will increase the cost of performance.)</li> <li>minThreshold/maxThreshold: which parts of the image become dilated.</li> </ul> <figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="n">vec2</span> <span class="n">texSize</span>   <span class="o">=</span> <span class="n">textureSize</span><span class="p">(</span><span class="n">colorTexture</span><span class="p">,</span> <span class="mi">0</span><span class="p">).</span><span class="n">xy</span><span class="p">;</span>
<span class="n">vec2</span> <span class="n">fragCoord</span> <span class="o">=</span> <span class="n">gl_FragCoord</span><span class="p">.</span><span class="n">xy</span><span class="p">;</span>
<span class="n">fragColor</span> <span class="o">=</span> <span class="n">texture</span><span class="p">(</span><span class="n">colorTexture</span><span class="p">,</span> <span class="n">fragCoord</span> <span class="o">/</span> <span class="n">texSize</span><span class="p">);</span></code></pre></figure> <p>Sample the color in current fragment. (This is a classic code section)</p> <figure class="highlight"><pre><code class="language-cpp" data-lang="cpp">  <span class="kt">float</span>  <span class="n">mx</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">;</span>
  <span class="n">vec4</span>  <span class="n">cmx</span> <span class="o">=</span> <span class="n">fragColor</span><span class="p">;</span>

  <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="o">-</span><span class="n">size</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">size</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="o">-</span><span class="n">size</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;=</span> <span class="n">size</span><span class="p">;</span> <span class="o">++</span><span class="n">j</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// For a rectangular shape.
</span>      <span class="c1">//if (false);
</span>
      <span class="c1">// For a diamond shape;
</span>      <span class="c1">//if (!(abs(i) &lt;= size - abs(j))) { continue; }
</span>
      <span class="c1">// For a circular shape.
</span>      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="n">distance</span><span class="p">(</span><span class="n">vec2</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">),</span> <span class="n">vec2</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span> <span class="o">&lt;=</span> <span class="n">size</span><span class="p">))</span> <span class="p">{</span> <span class="k">continue</span><span class="p">;</span> <span class="p">}</span>

      <span class="n">vec4</span> <span class="n">c</span> <span class="o">=</span>
        <span class="n">texture</span>
          <span class="p">(</span> <span class="n">colorTexture</span>
          <span class="p">,</span>   <span class="p">(</span> <span class="n">gl_FragCoord</span><span class="p">.</span><span class="n">xy</span>
              <span class="o">+</span> <span class="p">(</span><span class="n">vec2</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">)</span> <span class="o">*</span> <span class="n">separation</span><span class="p">)</span>
              <span class="p">)</span>
            <span class="o">/</span> <span class="n">texSize</span>
          <span class="p">);</span>

      <span class="kt">float</span> <span class="n">mxt</span> <span class="o">=</span> <span class="n">dot</span><span class="p">(</span><span class="n">c</span><span class="p">.</span><span class="n">rgb</span><span class="p">,</span> <span class="n">vec3</span><span class="p">(</span><span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.59</span><span class="p">,</span> <span class="mf">0.11</span><span class="p">));</span>

      <span class="k">if</span> <span class="p">(</span><span class="n">mxt</span> <span class="o">&gt;</span> <span class="n">mx</span><span class="p">)</span> <span class="p">{</span>
         <span class="n">mx</span> <span class="o">=</span> <span class="n">mxt</span><span class="p">;</span>
        <span class="n">cmx</span> <span class="o">=</span> <span class="n">c</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span></code></pre></figure> <p>There is some points need to be interpretated:</p> <ul> <li>The window shape determine the shape of the dilated parts of the image.</li> <li>c is sample color in the neighbor fragments.</li> <li>mxt is the gray value. We can convert sample color to gray color by dotting the gray vector.</li> <li>cmt is the sample color which has the biggest grey value in this window.</li> <li>mx: is the max grey value in this window.</li> </ul> <figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"> <span class="n">fragColor</span><span class="p">.</span><span class="n">rgb</span> <span class="o">=</span>
    <span class="n">mix</span>
      <span class="p">(</span> <span class="n">fragColor</span><span class="p">.</span><span class="n">rgb</span>
      <span class="p">,</span> <span class="n">cmx</span><span class="p">.</span><span class="n">rgb</span>
      <span class="p">,</span> <span class="n">smoothstep</span><span class="p">(</span><span class="n">minThreshold</span><span class="p">,</span> <span class="n">maxThreshold</span><span class="p">,</span> <span class="n">mx</span><span class="p">)</span>
      <span class="p">);</span></code></pre></figure> <p>If the fragment color found is less than minThreshold, the fragment color will be unchanged. If the fragment color found is greater than maxThreshold, the fragment color is replaced with the brightest color found.</p> <h2 id="depth-of-field">Depth of Field</h2> <p>The Depth of Field is an effect you cant live without once you’ve used.</p> <h3 id="conceptions">Conceptions</h3> <ul> <li>In Focus: Render the scene to a framebuffer in a normal way.</li> <li>Out of Focus: Render the scene in a blur way. For example, box blur, dilation.</li> <li>Bokeh: Dilate the out of focus texture, and use it as the out of focus input.</li> </ul> <h3 id="implementation-1">Implementation</h3> <figure class="highlight"><pre><code class="language-cpp" data-lang="cpp">  <span class="kt">float</span> <span class="n">minDistance</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">;</span>
  <span class="kt">float</span> <span class="n">maxDistance</span> <span class="o">=</span> <span class="mf">3.0</span><span class="p">;</span></code></pre></figure> <p>All positions below the minDistance will be completely in focus. All positions beyond the maxDistance will be completely out of focus.</p> <figure class="highlight"><pre><code class="language-cpp" data-lang="cpp">  <span class="n">vec4</span> <span class="n">focusColor</span>      <span class="o">=</span> <span class="n">texture</span><span class="p">(</span><span class="n">focusTexture</span><span class="p">,</span> <span class="n">texCoord</span><span class="p">);</span>
  <span class="n">vec4</span> <span class="n">outOfFocusColor</span> <span class="o">=</span> <span class="n">texture</span><span class="p">(</span><span class="n">outOfFocusTexture</span><span class="p">,</span> <span class="n">texCoord</span><span class="p">);</span></code></pre></figure> <p>The in focus color and out of focus color.</p> <figure class="highlight"><pre><code class="language-cpp" data-lang="cpp">  <span class="n">vec4</span> <span class="n">position</span> <span class="o">=</span> <span class="n">texture</span><span class="p">(</span><span class="n">positionTexture</span><span class="p">,</span> <span class="n">texCoord</span><span class="p">);</span></code></pre></figure> <p>The vertex position in view space.</p> <figure class="highlight"><pre><code class="language-cpp" data-lang="cpp">  <span class="kt">float</span> <span class="n">blur</span> <span class="o">=</span>
    <span class="n">smoothstep</span>
      <span class="p">(</span> <span class="n">minDistance</span>
      <span class="p">,</span> <span class="n">maxDistance</span>
      <span class="p">,</span> <span class="n">abs</span><span class="p">(</span><span class="n">position</span><span class="p">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">focusPoint</span><span class="p">.</span><span class="n">y</span><span class="p">)</span>
      <span class="p">);</span>
      
  <span class="n">fragColor</span> <span class="o">=</span> <span class="n">mix</span><span class="p">(</span><span class="n">focusColor</span><span class="p">,</span> <span class="n">outOfFocusColor</span><span class="p">,</span> <span class="n">blur</span><span class="p">);</span></code></pre></figure> <p>We can determine current fragment color by mixing the focus color and out of focus color, according to the blur factor. The blur factor can be calculated by the depth difference between the focus point and current fragment.</p> <h2 id="motion-blur">Motion Blur</h2> <h3 id="overview-1">Overview</h3> <p>The motion blur technique is divide into two categories. The less involved implementation will only blur the screen in relation with camera. The more involved implementation will blur any moving objcet even with camera remaining still.</p> <p>This paper talks about the less involved version, the principle is the same with the more involved version.</p> <h3 id="implementation-2">Implementation</h3> <h4 id="preparation">Preparation</h4> <figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="n">uniform</span> <span class="n">sampler2D</span> <span class="n">positionTexture</span><span class="p">;</span>
<span class="n">uniform</span> <span class="n">sampler2D</span> <span class="n">colorTexture</span><span class="p">;</span>
<span class="n">uniform</span> <span class="n">mat4</span> <span class="n">previousViewWorldMat</span><span class="p">;</span>
<span class="n">uniform</span> <span class="n">mat4</span> <span class="n">worldViewMat</span><span class="p">;</span>
<span class="n">uniform</span> <span class="n">mat4</span> <span class="n">lensProjection</span><span class="p">;</span></code></pre></figure> <ul> <li>positionTexture: vertex position in view space.</li> <li>colorTexture: normal render texture.</li> <li>previousViewWorldMat: the previous frame’s view to world matrix.</li> <li>worldViewMat: the current world to view matrix.</li> <li>lensProjection: the camera lens’ projection matrix.</li> </ul> <figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="n">uniform</span> <span class="kt">int</span> <span class="n">size</span><span class="p">;</span>
<span class="n">uniform</span> <span class="kt">float</span> <span class="n">separation</span><span class="p">;</span></code></pre></figure> <p>The adjustment factors.</p> <ul> <li>size: how many samples are taken along the blur direction.</li> <li>separation: increases the amount of blur at the cost of accuracy.</li> </ul> <h4 id="core">Core</h4> <figure class="highlight"><pre><code class="language-cpp" data-lang="cpp">  <span class="n">vec2</span> <span class="n">texSize</span>  <span class="o">=</span> <span class="n">textureSize</span><span class="p">(</span><span class="n">colorTexture</span><span class="p">,</span> <span class="mi">0</span><span class="p">).</span><span class="n">xy</span><span class="p">;</span>
  <span class="n">vec2</span> <span class="n">texCoord</span> <span class="o">=</span> <span class="n">gl_FragCoord</span><span class="p">.</span><span class="n">xy</span> <span class="o">/</span> <span class="n">texSize</span><span class="p">;</span>

  <span class="n">vec4</span> <span class="n">position1</span> <span class="o">=</span> <span class="n">texture</span><span class="p">(</span><span class="n">positionTexture</span><span class="p">,</span> <span class="n">texCoord</span><span class="p">);</span>
  <span class="n">vec4</span> <span class="n">position0</span> <span class="o">=</span> <span class="n">worldViewMat</span> <span class="o">*</span> <span class="n">previousViewWorldMat</span> <span class="o">*</span> <span class="n">position1</span><span class="p">;</span></code></pre></figure> <p>Firstly, we calculate the texCoord in current fragment.</p> <ul> <li>position1: where the things are now, sample the current vertex position.</li> <li>position0: this fragment’s previous interpolated vertex position.</li> </ul> <figure class="highlight"><pre><code class="language-cpp" data-lang="cpp">  <span class="n">position0</span>      <span class="o">=</span> <span class="n">lensProjection</span> <span class="o">*</span> <span class="n">position0</span><span class="p">;</span>
  <span class="n">position0</span><span class="p">.</span><span class="n">xyz</span> <span class="o">/=</span> <span class="n">position0</span><span class="p">.</span><span class="n">w</span><span class="p">;</span>
  <span class="n">position0</span><span class="p">.</span><span class="n">xy</span>   <span class="o">=</span> <span class="n">position0</span><span class="p">.</span><span class="n">xy</span> <span class="o">*</span> <span class="mf">0.5</span> <span class="o">+</span> <span class="mf">0.5</span><span class="p">;</span>

  <span class="n">position1</span>      <span class="o">=</span> <span class="n">lensProjection</span> <span class="o">*</span> <span class="n">position1</span><span class="p">;</span>
  <span class="n">position1</span><span class="p">.</span><span class="n">xyz</span> <span class="o">/=</span> <span class="n">position1</span><span class="p">.</span><span class="n">w</span><span class="p">;</span>
  <span class="n">position1</span><span class="p">.</span><span class="n">xy</span>   <span class="o">=</span> <span class="n">position1</span><span class="p">.</span><span class="n">xy</span> <span class="o">*</span> <span class="mf">0.5</span> <span class="o">+</span> <span class="mf">0.5</span><span class="p">;</span><span class="o">=</span></code></pre></figure> <p>Get the fragment’s coordinate in screen space.</p> <figure class="highlight"><pre><code class="language-cpp" data-lang="cpp">  <span class="n">vec2</span> <span class="n">direction</span>    <span class="o">=</span> <span class="n">position1</span><span class="p">.</span><span class="n">xy</span> <span class="o">-</span> <span class="n">position0</span><span class="p">.</span><span class="n">xy</span><span class="p">;</span>

  <span class="k">if</span> <span class="p">(</span><span class="n">length</span><span class="p">(</span><span class="n">direction</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mf">0.0</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span><span class="p">;</span> <span class="p">}</span></code></pre></figure> <p>Get the direction from previous frame’s uv to current frame’s uv.</p> <figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"> <span class="n">direction</span><span class="p">.</span><span class="n">xy</span> <span class="o">*=</span> <span class="n">separation</span><span class="p">;</span>

  <span class="n">vec2</span> <span class="n">forward</span>  <span class="o">=</span> <span class="n">texCoord</span><span class="p">;</span>
  <span class="n">vec2</span> <span class="n">backward</span> <span class="o">=</span> <span class="n">texCoord</span><span class="p">;</span>

  <span class="kt">float</span> <span class="n">count</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">;</span>

  <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">size</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">forward</span>  <span class="o">+=</span> <span class="n">direction</span><span class="p">;</span>
    <span class="n">backward</span> <span class="o">-=</span> <span class="n">direction</span><span class="p">;</span>

    <span class="n">fragColor</span> <span class="o">+=</span>
      <span class="n">texture</span>
        <span class="p">(</span> <span class="n">colorTexture</span>
        <span class="p">,</span> <span class="n">forward</span>
        <span class="p">);</span>
    <span class="n">fragColor</span> <span class="o">+=</span>
      <span class="n">texture</span>
        <span class="p">(</span> <span class="n">colorTexture</span>
        <span class="p">,</span> <span class="n">backward</span>
        <span class="p">);</span>

    <span class="n">count</span> <span class="o">+=</span> <span class="mf">2.0</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="n">fragColor</span> <span class="o">/=</span> <span class="n">count</span><span class="p">;</span></code></pre></figure> <p>From current fragment, we will extend the forward direction and backward direction. Finally, we will make an average among these sample colors.</p> <h2 id="pixelization">Pixelization</h2> <h3 id="overview-2">Overview</h3> <p>Pixelization helps you to save you time by not having to create all of the pixel art.</p> <p>### Implementation</p> <figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"> <span class="kt">int</span> <span class="n">pixelSize</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span></code></pre></figure> <ul> <li>pixelSize: the level of the scene’s pixelization.</li> </ul> <figure class="highlight"><pre><code class="language-cpp" data-lang="cpp">  <span class="kt">float</span> <span class="n">x</span> <span class="o">=</span> <span class="kt">int</span><span class="p">(</span><span class="n">gl_FragCoord</span><span class="p">.</span><span class="n">x</span><span class="p">)</span> <span class="o">%</span> <span class="n">pixelSize</span><span class="p">;</span>
  <span class="kt">float</span> <span class="n">y</span> <span class="o">=</span> <span class="kt">int</span><span class="p">(</span><span class="n">gl_FragCoord</span><span class="p">.</span><span class="n">y</span><span class="p">)</span> <span class="o">%</span> <span class="n">pixelSize</span><span class="p">;</span>

  <span class="n">x</span> <span class="o">=</span> <span class="n">floor</span><span class="p">(</span><span class="n">pixelSize</span> <span class="o">/</span> <span class="mf">2.0</span><span class="p">)</span> <span class="o">-</span> <span class="n">x</span><span class="p">;</span>
  <span class="n">y</span> <span class="o">=</span> <span class="n">floor</span><span class="p">(</span><span class="n">pixelSize</span> <span class="o">/</span> <span class="mf">2.0</span><span class="p">)</span> <span class="o">-</span> <span class="n">y</span><span class="p">;</span>

  <span class="n">x</span> <span class="o">=</span> <span class="n">gl_FragCoord</span><span class="p">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">x</span><span class="p">;</span>
  <span class="n">y</span> <span class="o">=</span> <span class="n">gl_FragCoord</span><span class="p">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">y</span><span class="p">;</span>
  
  <span class="n">fragColor</span> <span class="o">=</span> <span class="n">texture</span><span class="p">(</span><span class="n">colorTexture</span><span class="p">,</span> <span class="n">vec2</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="o">/</span> <span class="n">texSize</span><span class="p">);</span></code></pre></figure> <p>In one word, we will sample the screen color in a block way. The center of the window fragments determine the color the other fragments in their window.</p> <div class="entry-meta"> <br> <hr> <span class="entry-tags"><a href="https://onesilverbullet.github.io/silvergamer.github.io/tags/#Post-Processing" title="Pages tagged Post-Processing" class="tag"><span class="term">Post-Processing</span></a><a href="https://onesilverbullet.github.io/silvergamer.github.io/tags/#Screen Space" title="Pages tagged Screen Space" class="tag"><span class="term">Screen Space</span></a><a href="https://onesilverbullet.github.io/silvergamer.github.io/tags/#Graphics" title="Pages tagged Graphics" class="tag"><span class="term">Graphics</span></a></span> <span class="social-share"> <a href="https://www.facebook.com/sharer/sharer.php?u=https://onesilverbullet.github.io/silvergamer.github.io/post-effects/" title="Share on Facebook" class="tag"> <span class="term"><i class="fa fa-facebook-square"></i> Share</span> </a> <a href="https://twitter.com/intent/tweet?text=https://onesilverbullet.github.io/silvergamer.github.io/post-effects/" title="Share on Twitter" class="tag"> <span class="term"><i class="fa fa-twitter-square"></i> Tweet</span> </a> <a href="https://plus.google.com/share?url=https://onesilverbullet.github.io/silvergamer.github.io/post-effects/" title="Share on Google+" class="tag"> <span class="term"><i class="fa fa-google-plus-square"></i> +1</span> </a> </span> <div style="clear:both"></div> </div> </div> </div> <section id="disqus_thread" class="animated fadeInUp"></section><!-- /#disqus_thread --> </header> <!-- JS --> <script src="https://onesilverbullet.github.io/silvergamer.github.io/assets/js/jquery-1.12.0.min.js"></script> <script src="https://onesilverbullet.github.io/silvergamer.github.io/assets/js/jquery.dlmenu.min.js"></script> <script src="https://onesilverbullet.github.io/silvergamer.github.io/assets/js/jquery.goup.min.js"></script> <script src="https://onesilverbullet.github.io/silvergamer.github.io/assets/js/jquery.magnific-popup.min.js"></script> <script src="https://onesilverbullet.github.io/silvergamer.github.io/assets/js/jquery.fitvid.min.js"></script> <script src="https://onesilverbullet.github.io/silvergamer.github.io/assets/js/scripts.js"></script> <script type="text/javascript"> var disqus_shortname = 'taylantatli'; (function() { var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true; dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js'; (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq); })(); (function () { var s = document.createElement('script'); s.async = true; s.type = 'text/javascript'; s.src = '//' + disqus_shortname + '.disqus.com/count.js'; (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s); }()); </script> <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript> <!-- MathJax --> <script async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script> </body> </html>
